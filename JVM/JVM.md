# JVM 知识点

## 1 垃圾回收机制
- 垃圾回收机制，主要针对：堆和方法区的内存进行回收。因为此两个区域的内存在JVM运行过程中会有积累，占用内存，不回收会越来越多。
- 程序计数器、虚拟机栈、本地方法栈这三个内存区域跟随线程生死，所以无需回收。

### 1.1 对象存活判断
#### 1.1.1 计数器：
- 每增加一个引用计数器+1，引用消失计数器-1
- 优点：效率高。
- 缺点：无法解决对象间的相互引用问题。

#### 1.1.2 可达性分析
通过GC ROOTS对象作作为起点，从这些起点向下去搜索，所走过的路径叫做引用链，当一个对象到GC ROOTS没有任何引用链连接时，则证明此对象不可达。
##### 1.1.2.1 GC ROOTS对象
- 虚拟机栈(栈桢中的本地变量表)中的引用的对象
- 方法区中的类静态属性引用的对象
- 方法区中的常量引用的对象
- 本地方法栈中JNI的引用的对象

##### 1.1.2.2 最终判定对象是否被回收
在可达性分析算法中不可达的对象，也并非就判定为“死亡”了；判定一个对象最终是否死亡，至少经历两次标记过程：

- 不可达的对象会被第一次标记；
- 第一次标记的对象，判断是否重写了FINALIZE方法，如果重写了而且没有执行过，则执行FINALIZE方法。
- 在FINALIZE()中，若对象重新和引用链上的任一对象建立关联，则不会被第二次标记，它则不会被回收。

### 1.2 垃圾收集器
垃圾收集器的优化的主要目的是为了减少STW(STOP THE WORLD)的次数和减少每次STW的持续时间。
#### 1.2.1 串行收集器

#### 1.2.2 并行收集器（串行的多线程版本）
#### 1.2.3 PARALLEL收集器
#### 1.2.4 PARALLEL OLD 收集器
#### 1.2.5 G1收集器
#### 1.2.6 CMS收集器

## 2 内存模型